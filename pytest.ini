# Pytest Configuration for SNN Log Anomaly Detection
#
# This configuration file defines pytest behavior including test discovery patterns,
# output formatting, custom markers, coverage settings, and execution options.
#
# Usage: pytest (configuration is automatically loaded)

# =============================================================================
# Pytest Core Configuration
# =============================================================================
[pytest]

# Test discovery patterns
# Define filename, class, and function patterns for automatic test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Command-line options applied automatically to all pytest runs
addopts =
    -v                      # Verbose output showing individual test names
    --tb=short             # Short traceback format for failed tests
    --strict-markers       # Enforce that all markers are registered
    --color=yes            # Enable colored output for better readability
    --maxfail=1            # Stop after first test failure for faster feedback
    -p no:warnings         # Suppress pytest warnings for cleaner output

# Custom test markers for selective test execution
# Use with: pytest -m <marker_name>
markers =
    slow: Marks tests with long execution time (deselect with '-m "not slow"')
    integration: Marks integration tests requiring multiple components
    unit: Marks unit tests for isolated component testing
    docker: Marks tests requiring Docker environment

# Test discovery paths
# Pytest searches these directories for test files
testpaths = .
python_paths = .

# =============================================================================
# Coverage Configuration (for pytest-cov plugin)
# =============================================================================

[coverage:run]
# Source code directories to measure coverage
source = .

# Paths to exclude from coverage measurement
omit =
    */tests/*              # Exclude test files themselves
    */test_*.py           # Exclude test modules
    */venv/*              # Exclude virtual environment
    */.venv/*             # Exclude alternative venv location
    */site-packages/*     # Exclude installed packages

[coverage:report]
# Number of decimal places for coverage percentages
precision = 2

# Display lines not covered by tests
show_missing = True

# Skip files with no executable code
skip_empty = True
